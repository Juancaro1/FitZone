<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/StylePerfil.css">
    <title>Mi Perfil</title>
    <link rel="stylesheet" th:href="@{/css/StylePerfil.css}">
</head>
<body data-user-id="123">
    <nav>
        <img class="fitzone" src="/img/Logo.png" alt="FitZone Logo">
        <img src="/img/4.png" class="marca" alt="logo-fitzone">
        <ul>
            <li><a href="/localizaciones/agregar">Añadir Spot</a></li>
            <li><a href="/localizaciones">Localizaciones</a></li>
            <li><a href="/logout">Logout</a></li>
        </ul>
    </nav>

    <section>
        <img id="foto-perfil-preview" th:src="@{'/FotoPerfiles/' + ${usuario.imagen}}" alt="Imagen de perfil">
        <p class="nombre-usuario" th:text="${usuario.nombre + ' ' + usuario.apellido}">Nombre Usuario</p>
        <a class="editar-perfil" href="#" id="editar-perfil-btn">Editar Perfil</a>

        <ul>
            <li><a href="#">Sobre mi: <span th:text="${usuario.sobreMi}">No disponible</span></a></li> 
        </ul>

        <h4>Spots agregados por ti</h4>
        <p>Cuando agregues un lugar te lo mostraremos aquí, revisa el mapa y descubre nuevos lugares</p>
        
        <img src="/img/mapa.jpg" alt="Mapa">

        <a class="boton-ir-mapa" href="#">Ir al Mapa</a>

        <h4>Preferencias</h4>
        <ul class="preferencias-lista">
            <li th:each="preferencia : ${preferencias}" class="preferencia-item">
                <span th:text="${preferencia}"></span>
                <form th:action="@{/perfil/preferencia/eliminar}" method="POST">
                    <input type="hidden" name="preferencia" th:value="${preferencia}">
                    <button class="btn-eliminar-preferencia" type="submit">Eliminar</button>
                </form>
            </li>
        </ul>
        
        <a href="#" class="boton-editar-preferencia" id="editar-preferencia-btn">Añadir Preferencia</a>
    </section>

    <footer>
        <ul>
            <li class="contactos">Contacto</li>
            <li><a href="#" class="logo-facebook"></a></li>
            <li><a href="#" class="logo-instagram"></a></li>
        </ul>
    </footer>

    <section id="editar-perfil-modal" style="display: none;">
        <div class="modal-content">
            <h2>Editar Perfil</h2>
            <form id="form-editar-perfil" method="POST" th:action="@{/perfil/editar}" enctype="multipart/form-data">
                <label for="nombre">Nombre:</label>
                <input type="text" id="nombre" name="nombre" placeholder="Ingresa tu nombre" th:value="${nombreUsuario}" required>
    
                <label for="apellido">Apellido:</label>
                <input type="text" id="apellido" name="apellido" placeholder="Ingresa tu apellido" th:value="${apellidoUsuario}" required>
    
                <label for="sobreMi">Sobre mí:</label>
                <textarea id="sobreMi" name="sobreMi" placeholder="Escribe algo sobre ti" th:text="${sobreMiUsuario}"></textarea>

                <label for="imagen">Cambiar foto de perfil:</label>
                <input type="file" id="imagen" name="file" accept="image/*">
    
                <button type="submit">Guardar Cambios</button>
                <button type="button" id="cancelar-editar-perfil">Cancelar</button>
            </form>
        </div>
    </section>

    <section id="editar-preferencia-modal" style="display: none;">
        <div class="modal-content-preferencia">
            <h2>Editar Preferencias</h2>
            <form th:action="@{/perfil/preferencias/guardar/}" method="POST" id="form-preferencia-perfil">
                <label for="preferencia">Agregar nueva preferencia:</label>
                <input 
                    type="text" 
                    id="preferencia" 
                    name="preferencia" 
                    placeholder="Escribe tu preferencia aquí" 
                    required>
                <button type="submit">Guardar Preferencia</button>
                <button type="button" id="cancelar-editar-preferencia">Cancelar</button>
            </form>
        </div>
    </section>

    <script th:src="@{/js/Perfil.js}"></script>
</body>
</html>
